<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:SatNguApp.Mobile.ViewModels"
             x:Class="SatNguApp.Mobile.MainPage"
             BackgroundColor="#0B132B"
             Title="SÃT NGÆ¯ - TRá»¢ LÃ Cáº¦N THá»¦">



    <Grid RowDefinitions="Auto, *">
        <!-- Header -->
        <Border Grid.Row="0" BackgroundColor="#1C2541" Padding="20" StrokeThickness="0">
            <VerticalStackLayout Spacing="5">
                <Label Text="SÃT NGÆ¯ APP" 
                       TextColor="#FFD700" 
                       FontSize="28" 
                       FontAttributes="Bold" 
                       HorizontalOptions="Center" />
                <Label Text="{Binding LocationText}" 
                       TextColor="#5BC0BE" 
                       FontSize="12" 
                       HorizontalOptions="Center" />
            </VerticalStackLayout>
        </Border>

        <ScrollView Grid.Row="1">
            <VerticalStackLayout Padding="20" Spacing="20">
                
                <ActivityIndicator IsRunning="{Binding IsLoading}" 
                                   IsVisible="{Binding IsLoading}"
                                   Color="#FFD700" 
                                   HeightRequest="50" />

                <!-- Recommendation Card -->
                <Border StrokeShape="RoundRectangle 20" 
                        StrokeThickness="0" 
                        IsVisible="{Binding HasData}"
                        BackgroundColor="#1C2541"
                        Padding="25">
                    <VerticalStackLayout Spacing="20">
                        <HorizontalStackLayout Spacing="10">
                            <Label Text="ðŸŽ¯" FontSize="24" />
                            <VerticalStackLayout>
                                <Label Text="Má»¤C TIÃŠU HÃ”M NAY" TextColor="#6FFFE9" FontSize="12" FontAttributes="Bold" />
                                <Label Text="{Binding Recommendation.Recommendation.Fish_Target}" TextColor="White" FontSize="20" FontAttributes="Bold" />
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                        <BoxView HeightRequest="1" Color="#3A506B" />

                        <VerticalStackLayout Spacing="15">
                            <Label Text="ðŸŽ£ Bá»˜ Äá»’ CÃ‚U Tá»I Æ¯U" TextColor="#FFD700" FontSize="14" FontAttributes="Bold" />
                            
                            <Grid ColumnDefinitions="Auto, *" RowDefinitions="Auto, Auto, Auto" ColumnSpacing="15" RowSpacing="10">
                                <!-- Cáº§n & Phao -->
                                <Label Grid.Row="0" Grid.Column="0" Text="Cáº§n &amp; Phao:" TextColor="#5BC0BE" FontSize="13" VerticalOptions="Center" />
                                <Label Grid.Row="0" Grid.Column="1" Text="{Binding Recommendation.Recommendation.Gear}" TextColor="White" FontSize="14" />
                                
                                <!-- DÃ¢y Trá»¥c & Tháº»o -->
                                <Label Grid.Row="1" Grid.Column="0" Text="Trá»¥c &amp; Tháº»o:" TextColor="#5BC0BE" FontSize="13" VerticalOptions="Center" />
                                <Label Grid.Row="1" Grid.Column="1" Text="{Binding Recommendation.Recommendation.Axis_Line}" TextColor="White" FontSize="14">
                                    <Label.FormattedText>
                                        <FormattedString>
                                            <Span Text="{Binding Recommendation.Recommendation.Axis_Line}" />
                                            <Span Text=" | " TextColor="#5BC0BE" />
                                            <Span Text="{Binding Recommendation.Recommendation.Leader}" />
                                        </FormattedString>
                                    </Label.FormattedText>
                                </Label>
                                
                                <!-- LÆ°á»¡i CÃ¢u -->
                                <Label Grid.Row="2" Grid.Column="0" Text="LÆ°á»¡i CÃ¢u:" TextColor="#5BC0BE" FontSize="13" VerticalOptions="Center" />
                                <Label Grid.Row="2" Grid.Column="1" Text="{Binding Recommendation.Recommendation.Hook}" TextColor="White" FontSize="14" FontAttributes="Bold" />
                            </Grid>
                        </VerticalStackLayout>

                        <VerticalStackLayout Spacing="8">
                            <Label Text="ðŸª± BÃ QUYáº¾T Má»’I CÃ‚U ÄÃ€I" TextColor="#FFD700" FontSize="14" FontAttributes="Bold" />
                            <Label Text="{Binding Recommendation.Recommendation.Bait}" TextColor="White" FontSize="15" />
                        </VerticalStackLayout>

                        <Border BackgroundColor="#0B132B" Padding="15" StrokeShape="RoundRectangle 10" StrokeThickness="0">
                            <HorizontalStackLayout Spacing="20" HorizontalOptions="Center">
                                <VerticalStackLayout HorizontalOptions="Center">
                                    <Label Text="ðŸŒ¡ï¸" HorizontalOptions="Center" />
                                    <Label Text="{Binding Recommendation.Context.Temperature, StringFormat='{0}Â°C'}" TextColor="White" FontAttributes="Bold" />
                                </VerticalStackLayout>
                                <VerticalStackLayout HorizontalOptions="Center">
                                    <Label Text="ðŸŒŠ" HorizontalOptions="Center" />
                                    <Label Text="{Binding Recommendation.Context.Tide_Condition}" TextColor="White" FontAttributes="Bold" />
                                </VerticalStackLayout>
                                <VerticalStackLayout HorizontalOptions="Center">
                                    <Label Text="â˜ï¸" HorizontalOptions="Center" />
                                    <Label Text="{Binding Recommendation.Context.Weather_Condition}" TextColor="White" FontAttributes="Bold" />
                                </VerticalStackLayout>
                            </HorizontalStackLayout>
                        </Border>
                    </VerticalStackLayout>
                </Border>

                <!-- Biorhythm Card -->
                <Border StrokeShape="RoundRectangle 20" 
                        StrokeThickness="0" 
                        IsVisible="{Binding HasData}"
                        BackgroundColor="#1C2541"
                        Padding="25">
                    <VerticalStackLayout Spacing="15">
                        <Label Text="ðŸ”´ Äá»’NG Há»’ SINH Há»ŒC (BIá»‚U Äá»’ Cáº®N CÃ‚U)" 
                               TextColor="#FFD700" 
                               FontSize="14" 
                               FontAttributes="Bold" />
                        
                        <Label Text="{Binding Biorhythm.Advice}" 
                               TextColor="#6FFFE9" 
                               FontSize="13" 
                               FontAttributes="Italic" />

                        <HorizontalStackLayout Spacing="2" HeightRequest="100" VerticalOptions="End">
                            <BoxView WidthRequest="8" HeightRequest="40" Color="#5BC0BE" VerticalOptions="End" CornerRadius="4" />
                            <BoxView WidthRequest="8" HeightRequest="60" Color="#5BC0BE" VerticalOptions="End" CornerRadius="4" />
                            <BoxView WidthRequest="8" HeightRequest="80" Color="#FFD700" VerticalOptions="End" CornerRadius="4" />
                            <BoxView WidthRequest="8" HeightRequest="90" Color="#FFD700" VerticalOptions="End" CornerRadius="4" />
                            <BoxView WidthRequest="8" HeightRequest="70" Color="#5BC0BE" VerticalOptions="End" CornerRadius="4" />
                            <BoxView WidthRequest="8" HeightRequest="40" Color="#5BC0BE" VerticalOptions="End" CornerRadius="4" />
                            <BoxView WidthRequest="8" HeightRequest="20" Color="#3A506B" VerticalOptions="End" CornerRadius="4" />
                            <BoxView WidthRequest="8" HeightRequest="30" Color="#3A506B" VerticalOptions="End" CornerRadius="4" />
                            <BoxView WidthRequest="8" HeightRequest="50" Color="#5BC0BE" VerticalOptions="End" CornerRadius="4" />
                            <BoxView WidthRequest="8" HeightRequest="80" Color="#FFD700" VerticalOptions="End" CornerRadius="4" />
                        </HorizontalStackLayout>
                        <Label Text="Giai Ä‘oáº¡n CÃ¡ cáº¯n máº¡nh nháº¥t: 06:00 - 09:00" 
                               TextColor="#5BC0BE" 
                               FontSize="11" 
                               HorizontalOptions="Center" />
                    </VerticalStackLayout>
                </Border>
                
                <!-- Action Button -->
                <Button Text="Cáº¬P NHáº¬T Gá»¢I Ã Má»šI" 
                        BackgroundColor="#FFD700" 
                        TextColor="#0B132B"
                        FontAttributes="Bold"
                        CornerRadius="25"
                        HeightRequest="55"
                        Command="{Binding LoadRecommendationCommand}" />

                <Label Text="* Dá»¯ liá»‡u Ä‘Æ°á»£c cáº­p nháº­t dá»±a trÃªn tá»a Ä‘á»™ GPS vÃ  tráº¡m khÃ­ tÆ°á»£ng gáº§n nháº¥t." 
                       TextColor="#3A506B" 
                       FontSize="10" 
                       HorizontalOptions="Center" />
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
