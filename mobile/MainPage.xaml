<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:SatNguApp.Mobile.ViewModels"
             x:Class="SatNguApp.Mobile.MainPage"
             Title="Sát Ngư App - Dashboard">

    <ContentPage.BindingContext>
        <viewmodels:MainViewModel />
    </ContentPage.BindingContext>

    <ScrollView>
        <VerticalStackLayout Padding="30,0" Spacing="25">
            <Label Text="Gợi Ý Lên Đồ" 
                   Style="{StaticResource Headline}"
                   SemanticProperties.HeadingLevel="Level1" />

            <Label Text="{Binding LocationText}" 
                   Style="{StaticResource SubHeadline}" />
                   
            <ActivityIndicator IsRunning="{Binding IsLoading}" 
                               IsVisible="{Binding IsLoading}"
                               Color="{StaticResource Primary}" />

            <Border StrokeShape="RoundRectangle 10" 
                    StrokeThickness="2" 
                    IsVisible="{Binding HasData}"
                    Background="#202020"
                    Padding="20">
                <VerticalStackLayout Spacing="15">
                    <Label Text="🎣 Mục Tiêu" FontAttributes="Bold" FontSize="18" TextColor="{StaticResource Primary}" />
                    <Label Text="{Binding Recommendation.Recommendation.Fish_Target}" FontSize="16" />
                    
                    <BoxView HeightRequest="1" Color="Gray" />
                    
                    <Label Text="⚙️ Đồ Câu (Cần, Máy, Trục, Thẻo)" FontAttributes="Bold" FontSize="18" TextColor="{StaticResource Primary}" />
                    <Label Text="{Binding Recommendation.Recommendation.Gear}" FontSize="16" />
                    
                    <BoxView HeightRequest="1" Color="Gray" />
                    
                    <Label Text="🪱 Mồi Câu Khuyên Dùng" FontAttributes="Bold" FontSize="18" TextColor="{StaticResource Primary}" />
                    <Label Text="{Binding Recommendation.Recommendation.Bait}" FontSize="16" />
                    
                    <BoxView HeightRequest="1" Color="Gray" />
                    
                    <Label Text="🌥️ Thời Tiết Xung Quanh" FontAttributes="Bold" FontSize="18" TextColor="{StaticResource Secondary}" />
                    <Label Text="{Binding Recommendation.Context.Temperature, StringFormat='Nhiệt độ: {0}°C'}" FontSize="14" />
                    <Label Text="{Binding Recommendation.Context.Weather_Condition, StringFormat='Trời: {0}'}" FontSize="14" />
                    <Label Text="{Binding Recommendation.Context.Tide_Condition, StringFormat='Con nước: {0}'}" FontSize="14" />
                </VerticalStackLayout>
            </Border>

            <Button Text="Làm mới Gợi ý" 
                    Command="{Binding LoadRecommendationCommand}"
                    IsEnabled="{Binding IsLoading, Converter={x:StaticResource InvertedBoolConverter}}"
                    SemanticProperties.Hint="Lấy tọa độ mới và tải lại gợi ý" />
        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
